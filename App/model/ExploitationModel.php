<?php

    namespace Cineflix\App\Model;

    use Cineflix\Core\Util\Security;

    class ExploitationModel extends AbstractModel
    {

        private string $debut;
        private string $fin;

        public function __construct(?array $data)
        {
            parent::__construct($data);

            if(isset($data['debut'])) $this->setDebut($data['debut']);

            if (isset($data['fin'])) $this->setFin($data['fin']);
        }

        public function __get($item): mixed
        {
            switch ($item) {
                case 'debut':
                case 'fin':
                    $item = date("d-m-Y", strtotime($this->$item));
                    break;
                default:
                    $item = parent::__get($item);
            }

            return $item;
        }
        public function setDebut(string $date): void
        {
            $this->debut = Security::sanitize($date);
        }

        public function getDebut(): string
        {
            return (!empty($this->debut)) ? $this->debut : '';
        }
        public function getDebutFr(): string
        {
            $date = $this->getDebut();
            if(!empty($date)) {
                $date = $this->getDateFr($date);
                $date = date("d-m-Y", strtotime($date));
            }

            return $date;
        }

        public function setFin(string $date): void
        {
            $this->fin = Security::sanitize($date);
        }

        public function getFin(): string
        {
            return (!empty($this->fin)) ? $this->fin : '';
        }
        public function getFinFr(): string
        {
            $date = $this->getFin();
            if(!empty($date)) {
                $date = $this->getDateFr($date);
                $date = date("d-m-Y", strtotime($date));
            }
            return $date;
        }

    }
